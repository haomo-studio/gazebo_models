<?xml version="1.0" ?>
<sdf version="1.6">
  <model name="src_doorway">

    <!-- The big circular frame + the platform -->
    <link name="doorway_frame">

      <!-- Inertia, if needed -->
      <inertial>
        <pose>0 0 1.3 1.57 0 0</pose>
        <mass>300</mass>
        <inertia>
          <ixx>169.65</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>169.65</iyy>
          <iyz>0</iyz>
          <izz>337.5</izz>
        </inertia>
      </inertial>

      <!-- The platform with its ramps -->
      <collision name="platform">
        <pose>0 0 0.05 0 0 0</pose>
        <geometry>
          <box>
            <size>1.25 1.82 0.1</size>
          </box>
        </geometry>
      </collision>
      <collision name="front_ramp_1">
        <pose>0 0.92 0.05 0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.072 0.072</size>
          </box>
        </geometry>
      </collision>
      <collision name="front_ramp_2">
        <pose>0 0.97 0.031 0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.045 0.045</size>
          </box>
        </geometry>
      </collision>
      <collision name="front_ramp_3">
        <pose>0 1.0 0.02 0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.028 0.028</size>
          </box>
        </geometry>
      </collision>
      <collision name="front_ramp_4">
        <pose>0 1.02 0.012 0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.017 0.017</size>
          </box>
        </geometry>
      </collision>
      <collision name="front_ramp_5">
        <pose>0 1.03 0.008 0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.012 0.012</size>
          </box>
        </geometry>
      </collision>
      <collision name="front_ramp_6">
        <pose>0 1.0375 0.005 0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.008 0.008</size>
          </box>
        </geometry>
      </collision>
      <collision name="front_ramp_7">
        <pose>0 1.043 0.003 0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.005 0.005</size>
          </box>
        </geometry>
      </collision>
      <collision name="front_ramp_8">
        <pose>0 1.047 0.002 0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.0026 0.0026</size>
          </box>
        </geometry>
      </collision>
      <collision name="back_ramp_1">
        <pose>0 -0.92 0.05 -0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.072 0.072</size>
          </box>
        </geometry>
      </collision>
      <collision name="back_ramp_2">
        <pose>0 -0.97 0.031 -0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.045 0.045</size>
          </box>
        </geometry>
      </collision>
      <collision name="back_ramp_3">
        <pose>0 -1.0 0.02 -0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.028 0.028</size>
          </box>
        </geometry>
      </collision>
      <collision name="back_ramp_4">
        <pose>0 -1.02 0.012 -0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.017 0.017</size>
          </box>
        </geometry>
      </collision>
      <collision name="back_ramp_5">
        <pose>0 -1.03 0.008 -0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.012 0.012</size>
          </box>
        </geometry>
      </collision>
      <collision name="back_ramp_6">
        <pose>0 -1.0375 0.005 -0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.008 0.008</size>
          </box>
        </geometry>
      </collision>
      <collision name="back_ramp_7">
        <pose>0 -1.043 0.003 -0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.005 0.005</size>
          </box>
        </geometry>
      </collision>
      <collision name="back_ramp_8">
        <pose>0 -1.047 0.002 -0.96 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.0026 0.0026</size>
          </box>
        </geometry>
      </collision>

      <collision name="left_1">
        <pose>0.665 0 1.2 0 0 0</pose>
        <geometry>
          <box>
            <size>0.3 0.19 2.2</size>
          </box>
        </geometry>
      </collision>
      <collision name="left_2">
        <pose>0.96 0 1.21 0 0 0</pose>
        <geometry>
          <box>
            <size>0.3 0.19 1.65</size>
          </box>
        </geometry>
      </collision>
      <collision name="left_3">
        <pose>1.23 0 1.2 0 0 0</pose>
        <geometry>
          <box>
            <size>0.25 0.19 0.6</size>
          </box>
        </geometry>
      </collision>

      <!-- Collision elements in the circular frame -->
      <collision name="right_1">
        <pose>-0.665 0 1.2 0 0 0</pose>
        <geometry>
          <box>
            <size>0.3 0.19 2.2</size>
          </box>
        </geometry>
      </collision>
      <collision name="right_2">
        <pose>-0.96 0 1.21 0 0 0</pose>
        <geometry>
          <box>
            <size>0.3 0.19 1.65</size>
          </box>
        </geometry>
      </collision>
      <collision name="right_3">
        <pose>-1.23 0 1.2 0 0 0</pose>
        <geometry>
          <box>
            <size>0.25 0.19 0.6</size>
          </box>
        </geometry>
      </collision>

      <collision name="top_1">
        <pose>0 0 2.32 0 0 0</pose>
        <geometry>
          <box>
            <size>1.25 0.19 0.25</size>
          </box>
        </geometry>
      </collision>

      <collision name="diagonal_top_left">
        <pose>0.55 0 2.2 0 0.785 0</pose>
        <geometry>
          <box>
            <size>0.3 0.19 0.25</size>
          </box>
        </geometry>
      </collision>

      <collision name="diagonal_top_right">
        <pose>-0.55 0 2.2 0 -0.785 0</pose>
        <geometry>
          <box>
            <size>0.3 0.19 0.25</size>
          </box>
        </geometry>
      </collision>

      <collision name="diagonal_bottom_left">
        <pose>0.5 0 0.185 0 -0.785 0</pose>
        <geometry>
          <box>
            <size>0.3 0.19 0.07</size>
          </box>
        </geometry>
      </collision>

      <collision name="diagonal_bottom_right">
        <pose>-0.5 0 0.185 0 0.785 0</pose>
        <geometry>
          <box>
            <size>0.3 0.19 0.07</size>
          </box>
        </geometry>
      </collision>

      <visual name="visual">
        <geometry>
          <mesh>
            <uri>model://src_doorway/meshes/doorway_base.dae</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <!-- The door -->
    <link name="doorway_door">
      <pose>0 0 1 0 0 0</pose>

      <inertial>
        <pose>0 0 0.14 0 0 0</pose>
        <mass>20</mass>
        <inertia>
          <ixx>6.7268</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>8.33</iyy>
          <iyz>0</iyz>
          <izz>1.7268</izz>
        </inertia>
      </inertial>

      <collision name="center">
        <pose>0 0 0.14 0 0 0</pose>
        <geometry>
          <box>
            <size>0.7 0.19 2.03</size>
          </box>
        </geometry>
      </collision>
      <collision name="left">
        <pose>-0.4 0 0.18 0 0 0</pose>
        <geometry>
          <box>
            <size>0.17 0.19 1.7</size>
          </box>
        </geometry>
      </collision>
      <collision name="right">
        <pose>0.4 0 0.18 0 0 0</pose>
        <geometry>
          <box>
            <size>0.17 0.19 1.7</size>
          </box>
        </geometry>
      </collision>
      <collision name="top_left">
        <pose>-0.36 0 1.04 1.57 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.1</radius>
            <length>0.18</length>
          </cylinder>
        </geometry>
      </collision>
      <collision name="top_right">
        <pose>0.36 0 1.04 1.57 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.1</radius>
            <length>0.18</length>
          </cylinder>
        </geometry>
      </collision>
      <collision name="bottom_left">
        <pose>-0.36 0 -0.73 1.57 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.1</radius>
            <length>0.18</length>
          </cylinder>
        </geometry>
      </collision>
      <collision name="bottom_right">
        <pose>0.36 0 -0.73 1.57 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.1</radius>
            <length>0.18</length>
          </cylinder>
        </geometry>
      </collision>

      <collision name="hinge">
        <pose>0.507 -0.135 0.17 0 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.038</radius>
            <length>1.48</length>
          </cylinder>
        </geometry>
      </collision>

      <visual name="visual">
        <pose>0 0 -1 0 0 0</pose>
        <geometry>
          <mesh>
            <uri>model://src_doorway/meshes/doorway_door.dae</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <!-- Joint connecting the frame and the door -->
    <joint name="hinge" type="revolute">
        <parent>doorway_frame</parent>
        <child>doorway_door</child>
        <pose>0.5 -0.14 0 0 0 0</pose>
        <axis>
          <xyz>0 0 1</xyz>
          <limit>
            <lower>0</lower>
            <upper>3</upper>
          </limit>
          <dynamics>
            <damping>1.0</damping>
            <friction>1.0</friction>
          </dynamics>
          <use_parent_model_frame>true</use_parent_model_frame>
        </axis>
        <physics>
          <ode>
            <cfm_damping>1</cfm_damping>
          </ode>
        </physics>
      </joint>

  </model>
</sdf>
